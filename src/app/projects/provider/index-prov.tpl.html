<div class="container">
	<div class="page-header">
			<h2 class="text text-danger">
				<strong>{{ 'SERV-TITOL' | translate }}</strong> <!-- <span class="pull-right"><a class="btn btn-primary btn-xs" ui-sref="provinstances">Inst√†ncies de projecte</a></span> -->
			</h2>
	</div>

	<div class="row">
		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
			<div class="row">
				<div class="pull-right publish">
					<a ui-sref="publishsrv" class="btn btn-primary btn-xs">Publicar Nou Servei</a>
				</div>
			</div>
			<div class="row">
				<div class="col-xs-4 col-xs-offset-8">
					<input class="form-control input-sm" placeholder="{{ 'FILTER-PLACEHOLDER' | translate }}" type="text" ng-model="searchingWord">
				</div>
			</div>
			<table id="provservices" class="table table-responsive table-hover">
				<thead>
					<tr>
						<th></th>
						<th></th>
						<th>
							<a ng-click="provprojects.sortType = 'client.name'; provprojects.sortReverse = !provprojects.sortReverse">
				            {{ 'SRV-CLIENT' | translate }} 
				            	<span ng-show="provprojects.sortType == 'client.name' && !provprojects.sortReverse" class="fa fa-caret-down"></span>
				            	<span ng-show="provprojects.sortType == 'client.name' && provprojects.sortReverse" class="fa fa-caret-up"></span>
				            <a/>
						</th>
						<th>
							<a ng-click="provprojects.sortType = 'status'; provprojects.sortReverse = !provprojects.sortReverse">
				            {{ 'SRV-ESTAT' | translate }} 
				            	<span ng-show="provprojects.sortType == 'status' && !provprojects.sortReverse" class="fa fa-caret-down"></span>
				            	<span ng-show="provprojects.sortType == 'status' && provprojects.sortReverse" class="fa fa-caret-up"></span>
				          	</a>
						</th>
						<th>
							<a ng-click="provprojects.sortType = 'srv.project.name'; provprojects.sortReverse = !provprojects.sortReverse">
				            {{ 'SRV-PROJECTE' | translate }} 
				            	<span ng-show="provprojects.sortType == 'srv.project.name' && !provprojects.sortReverse" class="fa fa-caret-down"></span>
				           		<span ng-show="provprojects.sortType == 'srv.project.name' && provprojects.sortReverse" class="fa fa-caret-up"></span>
				         	 </a>
						</th>
						<th>
							<a ng-click="provprojects.sortType = 'created_at'; provprojects.sortReverse = !provprojects.sortReverse">
					            {{ 'SRV-CREACIO' | translate }} 
					            <span ng-show="provprojects.sortType == 'created_at' && !provprojects.sortReverse" class="fa fa-caret-down"></span>
					            <span ng-show="provprojects.sortType == 'created_at' && provprojects.sortReverse" class="fa fa-caret-up"></span>
					        </a>
						</th>
						<th>{{ 'SRV-ACCIONS' | translate }}</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="srv in provprojects.allProviderProjects | orderBy:provprojects.sortType:provprojects.sortReverse | filter: searchingWord">
						<td>
							<img width="60px" class="img-thumbnail" ng-src="assets/logos_mkp/{{provprojects.getImage(srv.service.name)}}" alt="Imatge servei" />
						</td>
						<td class="vert-align">
					        {{srv.service.name}} 
						</td>
						<td class="vert-align">
							{{srv.client.name}}
						</td>
						<td class="vert-align">
							<p ng-if="srv.status !== 8" ><span translate="{{provprojects.getLiteralStatus(srv.status)}}" class="label label-status" ng-class="(srv.status < 3) ? 'label-danger' : 'label-success'">{{(srv.status < 3) ? 'Pendent' : 'Confirmat'}}</span></p>
			    			<p ng-if="srv.status === 8"><span class="label label-status label-success">Inactiu</span></p>
						</td>
						<td class="vert-align">
							{{srv.project.name}}
						</td>
						<td class="vert-align">
							{{srv.created_at | date: 'dd-MM-yyyy'}}
						</td>
						<td class="vert-align">
							<button ng-click="provprojects.confirmProviderProject(srv)" class="btn btn-success btn-xs" ng-if='srv.status <= 2'>
								<i class="fa fa-check"></i>
								{{ 'ACTIVAR' | translate }}
							</button>
							<button ng-click="provprojects.disableProviderProject(srv)" class="btn btn-danger btn-xs" ng-if='srv.status >= 3 && srv.status <= 5'>
								<i class="fa fa-remove"></i>
								{{ 'DESACTIVAR' | translate }}
							</button>
						</td>
					</tr>
				</tbody>

			</table>
			<span us-spinner="{radius:30, width:8, length: 16}" spinner-key="spinner-1"></span>
		</div>
	</div>

</div>

